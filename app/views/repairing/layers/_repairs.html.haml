:scss

  table{
    border-spacing: 1px;
    border-collapse: separate;
    tr:nth-child(even) {background: #DDD}
    tr:nth-child(odd) {background: #FFF}
    td{
      border: 0px;
      border-right: 1px #FFF;
    }
    td.not-valid{
      background: #FFB59D;
    }
    td.coordinates{
      overflow: hidden;
    }
    .popover-content {
      padding: 0;
    }
  }

.modal.fade{id: 'edit_repair', role: 'dialog', tabindex: '-1', appendTo: '#repairs'}
  .modal-dialog.modal-sm{role: :document}
    .modal-content.modal-repair#repair

%h1
  = "Таблиця ремонтів (#{@repairs.count()})"
%table#edit_repairs
  %tr
    %th Spending units
    %th Erdpou spending units
    %th Subject
    %th Address
    %th Address to
    %th Work
    %th Repairing category
    %th Amount
    %th Repair start date
    %th Repair end date
    %th Warranty
    %th Prozzoro id
    %th Object owner
    %th Edrpou artist
    %th Description
    %th Coordinates
    %th
    %th

  - @repairs.each do |repair|
    %tr.editable-table-row
      %td{class: "#{valid_status(repair.spending_units)}"}
        = repair.spending_units
      %td{class: "#{valid_status(repair.edrpou_spending_units)}"}
        = repair.edrpou_spending_units
      %td= repair.subject
      %td{class: "#{valid_status(repair.address)}"}
        = repair.address
      %td= repair.address_to
      %td= repair.work
      %td= repair.repairing_category.title if repair.repairing_category
      %td{class: "#{valid_status(repair.amount)}"}
        = repair.amount
      %td= repair.repair_start_date
      %td= repair.repair_end_date
      %td= repair.warranty_date
      %td= repair.prozzoro_id
      %td= repair.obj_owner
      %td= repair.edrpou_artist
      %td= repair.description
      %td.coordinates{class: "#{valid_status(repair.coordinates)}"}
        = truncate(repair.coordinates.to_s, length: 30)

      %td
        %a.edit-repair{ 'data-toggle' => 'modal', 'data-target'=> '#myModal', 'data-repair-id' => "#{repair.id}" }
          %i.fa.fa-pencil.fa-2x
        = link_to repairing_layer_repair_path(repair.layer_id, repair.id), method: :delete, remote: true, class: 'drop-repair', data: { confirm: 'Are you sure?' } do
          %i.fa.fa-trash-o.fa-2x

.paginator-repairs
  = paginate @repairs, :remote => true

:javascript

  $(document).ready(function(){

    function get_repair_info_modal(id_repair){
      $.ajax({
        url: "#{repairing_edit_in_modal_path}",
        dataType: 'script',
        data: { id: id_repair },
        success: function(data){}
      })
    }

    $('.edit-repair').on('click',function(){
      var repair_id = $(this).attr('data-repair-id');
      get_repair_info_modal(repair_id);
    });

  })