// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file.
//
// Read Sprockets README (https://github.com/sstephenson/sprockets#sprockets-directives) for details
// about supported directives.
//
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require jquery.remotipart

//= require twitter/bootstrap
//= require turbolinks

//= require moment
//= require moment/uk.js
//= require fullcalendar/fullcalendar.min
//= require fullcalendar/uk
//= require fullcalendar/en

//= require bootstrap-datepicker/bootstrap-datepicker
//= require bootstrap-datepicker/bootstrap-datepicker.en
//= require bootstrap-datepicker/bootstrap-datepicker.uk

//= require masonry.pkgd.min

//= require d3

//= require snap_svg_animation/snap.svg.js

//= require timecircles

//= require select2
//= require select2_locale_uk

//= require xeditable/bootstrap3-editable/js/bootstrap-editable
//= require bootstrap-editable-rails
//= require xeditable/inputs-ext/wysihtml5/bootstrap-wysihtml5-0.0.2/wysihtml5-0.3.0
//= require xeditable/inputs-ext/wysihtml5/bootstrap-wysihtml5-0.0.2/bootstrap-wysihtml5-0.0.2
//= require xeditable/inputs-ext/wysihtml5/wysihtml5
//= require bootstrap-wysihtml5/b3
//= require bootstrap-wysihtml5/locales/ua-UA

//= require bootstrap-colorpicker-master/dist/js/bootstrap-colorpicker

// This is optional (in case you have `I18n is not defined` error)
// If you want to put this line, you must put it BEFORE `i18n/translations`
//= require i18n
//
// This is a must
//= require i18n/translations

//= require summernote/summernote.min


//= require leaflet/leaflet.js
//= require leaflet/markercluster.js
//= require leaflet/leaflet-routing-machine.js

//= require data-confirm-modal

//= require_tree .

$(document).ready(function() {
//    $.fn.editable.defaults.mode = 'inline';
    $.fn.editable.defaults.ajaxOptions = {type: "PUT"};
})

window.aHelper = {
    lang: function() {
        locale = document.location.href.split("locale=")[1] || 'uk'
        return locale.substr(0,2)
    },
    short_label: function(amount) {
        return (amount / window.aHelper.k(amount)).toFixed(2) + window.aHelper.short_unit(amount)
    },
    short_unit: function(totalSize) {
        if (totalSize >= 1000000000000) return I18n.t("short_units.trillion");
        if (totalSize >= 1000000000) return I18n.t("short_units.billion");
        if (totalSize >= 1000000) return I18n.t("short_units.million");
        if (totalSize >= 1000) return I18n.t("short_units.thousand");
        return "";
    },
    k: function(totalSize) {
        if (totalSize >= 1000000000000) return 1000000000000;
        if (totalSize >= 1000000000) return 1000000000;
        if (totalSize >= 1000000) return 1000000;
        if (totalSize >= 1000) return 1000;
        return 1;
    }
}

I18n.locale = window.aHelper.lang()

$(document).on('ready page:change', function() {
    $(".bootstrap_flash").delay(10000).fadeOut(200);
})

$(document).ready(function() {
    $.fn.redraw = function(){
        return $(this).each(function(){
            var n = document.createTextNode(' ');
            $(this).append(n);
            setTimeout(function(){n.parentNode.removeChild(n)}, 0);
        });
    }
})